<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Ibon MartÃ­nez-Arranz">
  <link rel="canonical" href="https://github.com/imarranz/essential-guide-to-pandas/230_data_reshaping.html">
  <link rel="shortcut icon" href="img/favicon.ico">
  <title>Data Reshaping - Essential Guide to Pandas</title>
  <link rel="stylesheet" href="css/theme.css" />
  <link rel="stylesheet" href="css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Data Reshaping";
    var mkdocs_page_input_path = "230_data_reshaping.md";
    var mkdocs_page_url = "/imarranz/essential-guide-to-pandas/230_data_reshaping.html";
  </script>
  
  <script src="js/jquery-2.1.1.min.js" defer></script>
  <script src="js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/python.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/bash.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="." class="icon icon-home"> Essential Guide to Pandas</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="index.html">Essential Guide to Pandas</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Data Handling</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="010_data_loading.html">Data Loading</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="020_basic_data_inspection.html">Basic Data Inspection</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="030_data_cleaning.html">Data Cleaning</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="080_data_formatting_and_conversion.html">Data Formatting and Conversion</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="220_dealing_with_missing_data.html">Dealing with Missing Data</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Data Analysis</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="040_data_transformation.html">Data Transformation</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="050_data_visualization_integration.html">Data Visualization Integration</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="060_statistical_analysis.html">Statistical Analysis</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="090_advanced_data_transformation.html">Advanced Data Transformation</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="180_advanced_grouping_and_aggregation.html">Advanced Grouping and Aggregation</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="190_text_data_specific_operations.html">Text Data Specific Operations</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="200_working_with_json_and_xml.html">Working with JSON and XML</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Data Manipulation</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="070_indexing_and_selection.html">Indexing and Selection</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="130_multi-index_operations.html">Multi-Index Operations</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="230_data_reshaping.html">Data Reshaping</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="240_categorical_data_operations.html">Categorical Data Operations</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="250_advanced_indexing.html">Advanced Indexing</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Data Integration</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="100_handling_time_series_data.html">Handling Time Series</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="110_file_export.html">File Export</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="210_advanced_file_handling.html">Advanced File Handling</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="270_advanced_data_merging.html">Advanced Data Merging</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Quality Control</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="140_data_merging_techniques.html">Data Merging Techniques</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="150_dealing_with_duplicates.html">Dealing with Duplicates</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="160_custom_operations_with_apply.html">Custom Operations with Apply</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="170_integration_with_matplotlib_for_custom_plots.html">Integration with Matplotlib for Custom Plots</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="260_efficient_computations.html">Efficient Computations</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="280_data_quality_checks.html">Data Quality Checks</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="290_real_word_case_studies.html">Real-World Case Studies</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href=".">Essential Guide to Pandas</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".">Docs</a> &raquo;</li>
    
      
        
          <li>Data Manipulation &raquo;</li>
        
      
    
    <li>Data Reshaping</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/imarranz/essential-guide-to-pandas/edit/master/docs/230_data_reshaping.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
    <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
        <a href="240_categorical_data_operations.html" class="btn btn-neutral float-right" title="Categorical Data Operations">Next <span class="icon icon-circle-arrow-right"></span></a>
        <a href="130_multi-index_operations.html" class="btn btn-neutral" title="Multi-Index Operations"><span class="icon icon-circle-arrow-left"></span> Previous</a>
    </div>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="data_reshaping">Data Reshaping<a class="headerlink" href="#data_reshaping" title="Permanent link">#</a></h1>
<p>Data reshaping is a crucial aspect of data preparation that involves transforming data between wide format (with more columns) and long format (with more rows), depending on the needs of your analysis. This chapter demonstrates how to reshape data from wide to long formats and vice versa using Pandas.</p>
<h2 id="wide_to_long_format">Wide to Long Format<a class="headerlink" href="#wide_to_long_format" title="Permanent link">#</a></h2>
<p>The <code>wide_to_long</code> function in Pandas is a powerful tool for transforming data from wide format to long format, which is often more amenable to analysis in Pandas:</p>
<pre><code class="language-python">import pandas as pd

# Sample DataFrame in wide format
data = {
    'id': [1, 2],
    'A_2020': [100, 200],
    'A_2021': [150, 250],
    'B_2020': [300, 400],
    'B_2021': [350, 450]
}
df = pd.DataFrame(data)

# Transforming from wide to long format
long_df = pd.wide_to_long(df, stubnames = ['A', 'B'], sep = '_', i = 'id', j = 'year')
print(long_df)
</code></pre>
<p>Result:</p>
<pre><code class="language-plaintext">           A    B
id year
1  2020  100  300
   2021  150  350
2  2020  200  400
   2021  250  450
</code></pre>
<p>This output represents a DataFrame in long format where each row corresponds to a single year for each variable (A and B) and each id.</p>
<h2 id="long_to_wide_format">Long to Wide Format<a class="headerlink" href="#long_to_wide_format" title="Permanent link">#</a></h2>
<p>Converting data from long to wide format involves creating a pivot table, which can simplify certain types of data analysis by displaying data with one variable per column and combinations of other variables per row:</p>
<pre><code class="language-python"># Assuming long_df is the DataFrame in long format from the previous example
# We will use a slight modification for clarity
long_data = {
    'id': [1, 1, 2, 2],
    'year': [2020, 2021, 2020, 2021],
    'A': [100, 150, 200, 250],
    'B': [300, 350, 400, 450]
}
long_df = pd.DataFrame(long_data)

# Transforming from long to wide format
wide_df = long_df.pivot(index = 'id', columns = 'year')
print(wide_df)
</code></pre>
<p>Result:</p>
<pre><code class="language-plaintext">       A         B
year 2020 2021 2020 2021
id
1    100  150  300  350
2    200  250  400  450
</code></pre>
<p>This result demonstrates a DataFrame in wide format where each <code>id</code> has associated values of A and B for each year spread across multiple columns.</p>
<p>Reshaping data effectively allows for easier analysis, particularly when dealing with panel data or time series that require operations across different dimensions.</p>
              
            </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p><b>Essential Guide to Pandas</b> <br>Copyright &#169; 2024 <a href="https://github.com/imarranz">Ibon MartÃ­nez-Arranz</a><br></p>
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/imarranz/essential-guide-to-pandas/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="130_multi-index_operations.html" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="240_categorical_data_operations.html" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '.';</script>
    <script src="js/theme.js" defer></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
      <script src="search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
